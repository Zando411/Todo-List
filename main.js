(()=>{"use strict";const e=document.querySelector("[data-lists]"),t=document.querySelector("[data-tasks]"),n=document.getElementById("task-template"),i="task.lists",d="task.selectedListId";let l=JSON.parse(localStorage.getItem(i))||[],s=localStorage.getItem(d);function a(){localStorage.setItem(i,JSON.stringify(l)),localStorage.setItem(d,s)}function o(){a(),c()}function c(){r(e),console.log(l),l.forEach((t=>{const n=document.createElement("div");n.classList.add("lists"),n.dataset.listId=t.id;let i=`\n        <div class="list-item">\n          <h3 class="list-text hover">${t.name}</h3>\n          <i class="fa-solid fa-minus hover fa-lg" style="color: #f8f7f9" data-delete-list-btn></i>\n        </div>\n        `;n.innerHTML=i;const d=n.querySelector(".list-text");t.id===s&&d.classList.add("current"),e.appendChild(n)}));const i=l.find((e=>e.id===s));t.style.display=null==s?"none":"",r(t),function(e){e.tasks.forEach((i=>{const d=document.importNode(n.content,!0),c=d.querySelector("input"),r=d.querySelector("p.name"),m=d.querySelector("p.description"),u=d.querySelector("p.date"),p=d.querySelector("p.priority"),y=d.querySelector(".task-item"),g=d.querySelector(".delete-task-btn");g.id="btn"+i.id,y.id=i.id,c.id="chk"+i.id,c.checked=i.complete,r.innerHTML=i.name,m.innerHTML=i.description,u.innerHTML=i.date,p.innerHTML=i.priority,t.appendChild(d),c.addEventListener("change",(()=>{i.complete=c.checked,i.complete?y.classList.add("completed"):y.classList.remove("completed"),a()})),i.complete&&y.classList.add("completed"),g.addEventListener("click",(()=>{const t=l.findIndex((e=>e.id===s));e.tasks=e.tasks.filter((e=>e.id!==i.id)),l[t]=e,o()}))}))}(i)}function r(e){for(;e.firstChild;)e.removeChild(e.firstChild)}document.getElementById("new-list").addEventListener("click",(function(){document.getElementById("list-form").style.display="flex"})),document.getElementById("close-form").addEventListener("click",(function(){let e=document.getElementById("list-form"),t=document.getElementById("list-name");if(""===t.value)return;const n=(i=t.value,{id:Date.now().toString(),name:i,tasks:[]});var i;t.value="",l.push(n),e.style.display="none",o()})),e.addEventListener("click",(e=>{"h3"===e.target.tagName.toLowerCase()&&(s=e.target.parentNode.parentNode.dataset.listId,o())})),e.addEventListener("click",(e=>{if(e.target.hasAttribute("data-delete-list-btn")){e.target.querySelector("i");const t=e.target.parentNode.parentNode.dataset.listId;l=l.filter((e=>e.id!==t)),t===s&&(s=null),o()}})),document.getElementById("add-task").addEventListener("click",(()=>{const e=function(){const e=document.getElementById("name").value,t=document.getElementById("description").value,n=document.getElementById("date").value,i=document.getElementById("priority").value;let d=n.slice(8,10),l=n.slice(5,7),s=n.slice(0,4);l.startsWith("0")&&(l=l.substring(1)),d.startsWith("0")&&(d=d.substring(1));let a=`${l}/${d}/${s}`;if(""!==e&&""!==t&&""!==a&&""!==i)return{name:e,description:t,date:a,priority:i};document.getElementById("error-text").style.display="block"}(),t=(n=e.name,i=e.description,d=e.date,a=e.priority,{id:Date.now().toString(),name:n,description:i,date:d,priority:a,complete:!1});var n,i,d,a;l.find((e=>e.id===s)).tasks.push(t),document.getElementById("name").value="",document.getElementById("description").value="",document.getElementById("date").value="",document.getElementById("priority").value="",o()})),t.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(l.find((e=>e.id===s)).tasks.find((t=>"chk"+t.id===e.target.id)).complete=e.target.checked,a())})),c()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbGlzdExvZ2ljLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kaXNwbGF5SGFuZGxlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZm9ybXMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Rhc2tMb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xlYXJJbnB1dHMsIGdldElucHV0VmFsdWVzIH0gZnJvbSAnLi90YXNrTG9naWMnO1xuXG5jb25zdCBsaXN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxpc3RzXScpO1xuY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YXNrc10nKTtcbmNvbnN0IHRhc2tUZW1wbGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrLXRlbXBsYXRlJyk7XG5cbmNvbnN0IExPQ0FMX1NUT1JBR0VfTElTVF9LRVkgPSAndGFzay5saXN0cyc7XG5jb25zdCBMT0NBTF9TVE9SQUdFX1NFTEVDVEVEX0xJU1RfSURfS0VZID0gJ3Rhc2suc2VsZWN0ZWRMaXN0SWQnO1xubGV0IGxpc3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0xJU1RfS0VZKSkgfHwgW107XG5sZXQgc2VsZWN0ZWRMaXN0SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX1NFTEVDVEVEX0xJU1RfSURfS0VZKTtcblxuZnVuY3Rpb24gbGlzdEV2ZW50TGlzdGVuZXIoKSB7XG4gIGxpc3RzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaDMnKSB7XG4gICAgICBzZWxlY3RlZExpc3RJZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0Lmxpc3RJZDtcbiAgICAgIHNhdmVBbmRSZW5kZXIoKTtcbiAgICB9XG4gIH0pO1xuICBsaXN0c0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1kZWxldGUtbGlzdC1idG4nKSkge1xuICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZS50YXJnZXQucXVlcnlTZWxlY3RvcignaScpO1xuICAgICAgY29uc3QgaWRQYXJlbnQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZGF0YXNldC5saXN0SWQ7XG4gICAgICBsaXN0cyA9IGxpc3RzLmZpbHRlcigobGlzdCkgPT4gbGlzdC5pZCAhPT0gaWRQYXJlbnQpO1xuICAgICAgaWYgKGlkUGFyZW50ID09PSBzZWxlY3RlZExpc3RJZCkge1xuICAgICAgICBzZWxlY3RlZExpc3RJZCA9IG51bGw7XG4gICAgICB9XG4gICAgICBzYXZlQW5kUmVuZGVyKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlzdChuYW1lKSB7XG4gIHJldHVybiB7XG4gICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICBuYW1lOiBuYW1lLFxuICAgIHRhc2tzOiBbXSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFzayhuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkpIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgIG5hbWU6IG5hbWUsXG4gICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgIGRhdGU6IGRhdGUsXG4gICAgcHJpb3JpdHk6IHByaW9yaXR5LFxuICAgIGNvbXBsZXRlOiBmYWxzZSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2F2ZSgpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9MSVNUX0tFWSwgSlNPTi5zdHJpbmdpZnkobGlzdHMpKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9TRUxFQ1RFRF9MSVNUX0lEX0tFWSwgc2VsZWN0ZWRMaXN0SWQpO1xufVxuXG5mdW5jdGlvbiBzYXZlQW5kUmVuZGVyKCkge1xuICBzYXZlKCk7XG4gIHJlbmRlcigpO1xufVxuXG5mdW5jdGlvbiByZW5kZXIoKSB7XG4gIGNsZWFyRWxlbWVudChsaXN0c0NvbnRhaW5lcik7XG4gIHJlbmRlckxpc3RzKCk7XG5cbiAgY29uc3Qgc2VsZWN0ZWRMaXN0ID0gbGlzdHMuZmluZCgobGlzdCkgPT4gbGlzdC5pZCA9PT0gc2VsZWN0ZWRMaXN0SWQpO1xuICBpZiAoc2VsZWN0ZWRMaXN0SWQgPT0gbnVsbCkge1xuICAgIHRhc2tzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH0gZWxzZSB7XG4gICAgdGFza3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICcnO1xuICB9XG4gIGNsZWFyRWxlbWVudCh0YXNrc0NvbnRhaW5lcik7XG4gIHJlbmRlclRhc2tzKHNlbGVjdGVkTGlzdCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRhc2tzKHNlbGVjdGVkTGlzdCkge1xuICBzZWxlY3RlZExpc3QudGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0YXNrVGVtcGxhdGUuY29udGVudCwgdHJ1ZSk7XG4gICAgY29uc3QgY2hlY2tib3ggPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgIGNvbnN0IG5hbWUgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwLm5hbWUnKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AuZGVzY3JpcHRpb24nKTtcbiAgICBjb25zdCBkYXRlID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcigncC5kYXRlJyk7XG4gICAgY29uc3QgcHJpb3JpdHkgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwLnByaW9yaXR5Jyk7XG4gICAgY29uc3QgdGFza0l0ZW0gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFzay1pdGVtJyk7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcignLmRlbGV0ZS10YXNrLWJ0bicpO1xuXG4gICAgZGVsZXRlQnV0dG9uLmlkID0gJ2J0bicgKyB0YXNrLmlkO1xuICAgIHRhc2tJdGVtLmlkID0gdGFzay5pZDtcbiAgICBjaGVja2JveC5pZCA9ICdjaGsnICsgdGFzay5pZDtcbiAgICBjaGVja2JveC5jaGVja2VkID0gdGFzay5jb21wbGV0ZTtcbiAgICBuYW1lLmlubmVySFRNTCA9IHRhc2submFtZTtcbiAgICBkZXNjcmlwdGlvbi5pbm5lckhUTUwgPSB0YXNrLmRlc2NyaXB0aW9uO1xuICAgIGRhdGUuaW5uZXJIVE1MID0gdGFzay5kYXRlO1xuICAgIHByaW9yaXR5LmlubmVySFRNTCA9IHRhc2sucHJpb3JpdHk7XG4gICAgdGFza3NDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0VsZW1lbnQpO1xuXG4gICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgdGFzay5jb21wbGV0ZSA9IGNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICBpZiAodGFzay5jb21wbGV0ZSkge1xuICAgICAgICB0YXNrSXRlbS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbXBsZXRlZCcpO1xuICAgICAgfVxuICAgICAgc2F2ZSgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRhc2suY29tcGxldGUpIHtcbiAgICAgIHRhc2tJdGVtLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xuICAgIH1cbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGRlbGV0ZSBidXR0b25cbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZExpc3RJbmRleCA9IGxpc3RzLmZpbmRJbmRleChcbiAgICAgICAgKGxpc3QpID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkTGlzdElkXG4gICAgICApO1xuICAgICAgc2VsZWN0ZWRMaXN0LnRhc2tzID0gc2VsZWN0ZWRMaXN0LnRhc2tzLmZpbHRlcigodCkgPT4gdC5pZCAhPT0gdGFzay5pZCk7XG4gICAgICBsaXN0c1tzZWxlY3RlZExpc3RJbmRleF0gPSBzZWxlY3RlZExpc3Q7XG4gICAgICBzYXZlQW5kUmVuZGVyKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaXN0cygpIHtcbiAgY29uc29sZS5sb2cobGlzdHMpO1xuICBsaXN0cy5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgY29uc3QgbGlzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsaXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdsaXN0cycpO1xuICAgIGxpc3RFbGVtZW50LmRhdGFzZXQubGlzdElkID0gbGlzdC5pZDtcbiAgICBsZXQgbGlzdEVsZW1lbnRIVE1MID0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1pdGVtXCI+XG4gICAgICAgICAgPGgzIGNsYXNzPVwibGlzdC10ZXh0IGhvdmVyXCI+JHtsaXN0Lm5hbWV9PC9oMz5cbiAgICAgICAgICA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLW1pbnVzIGhvdmVyIGZhLWxnXCIgc3R5bGU9XCJjb2xvcjogI2Y4ZjdmOVwiIGRhdGEtZGVsZXRlLWxpc3QtYnRuPjwvaT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICBsaXN0RWxlbWVudC5pbm5lckhUTUwgPSBsaXN0RWxlbWVudEhUTUw7XG4gICAgY29uc3QgbGlzdE5hbWUgPSBsaXN0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubGlzdC10ZXh0Jyk7XG4gICAgaWYgKGxpc3QuaWQgPT09IHNlbGVjdGVkTGlzdElkKSB7XG4gICAgICBsaXN0TmFtZS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XG4gICAgfVxuXG4gICAgbGlzdHNDb250YWluZXIuYXBwZW5kQ2hpbGQobGlzdEVsZW1lbnQpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJFbGVtZW50KGVsZW1lbnQpIHtcbiAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0YXNrRXZlbnRMaXN0ZW5lcigpIHtcbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10YXNrJyk7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IGdldElucHV0VmFsdWVzKCk7XG4gICAgY29uc3QgdGFzayA9IGNyZWF0ZVRhc2soXG4gICAgICBpbnB1dFZhbHVlcy5uYW1lLFxuICAgICAgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24sXG4gICAgICBpbnB1dFZhbHVlcy5kYXRlLFxuICAgICAgaW5wdXRWYWx1ZXMucHJpb3JpdHlcbiAgICApO1xuICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGxpc3RzLmZpbmQoKGxpc3QpID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkTGlzdElkKTtcbiAgICBzZWxlY3RlZExpc3QudGFza3MucHVzaCh0YXNrKTtcbiAgICBjbGVhcklucHV0cygpO1xuICAgIHNhdmVBbmRSZW5kZXIoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZENoZWNrYm94RXZlbnRMaXN0ZW5lcigpIHtcbiAgdGFza3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkTGlzdCA9IGxpc3RzLmZpbmQoKGxpc3QpID0+IGxpc3QuaWQgPT09IHNlbGVjdGVkTGlzdElkKTtcbiAgICAgIGNvbnN0IHNlbGVjdGVkVGFzayA9IHNlbGVjdGVkTGlzdC50YXNrcy5maW5kKFxuICAgICAgICAodGFzaykgPT4gJ2NoaycgKyB0YXNrLmlkID09PSBlLnRhcmdldC5pZFxuICAgICAgKTtcbiAgICAgIHNlbGVjdGVkVGFzay5jb21wbGV0ZSA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICBzYXZlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgcmVuZGVyTGlzdHMsXG4gIGNyZWF0ZUxpc3QsXG4gIGNyZWF0ZVRhc2ssXG4gIGxpc3RzLFxuICB0YXNrRXZlbnRMaXN0ZW5lcixcbiAgc2F2ZUFuZFJlbmRlcixcbiAgbGlzdEV2ZW50TGlzdGVuZXIsXG4gIHJlbmRlcixcbiAgYWRkQ2hlY2tib3hFdmVudExpc3RlbmVyLFxufTtcbiIsImltcG9ydCB7IGNsb3NlTGlzdEZvcm0sIG9wZW5MaXN0Rm9ybSB9IGZyb20gJy4vZm9ybXMnO1xuaW1wb3J0IHtcbiAgYWRkQ2hlY2tib3hFdmVudExpc3RlbmVyLFxuICBsaXN0RXZlbnRMaXN0ZW5lcixcbiAgdGFza0V2ZW50TGlzdGVuZXIsXG59IGZyb20gJy4vbGlzdExvZ2ljJztcblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWxpc3QnKTtcbiAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5MaXN0Rm9ybSk7XG5cbiAgY29uc3QgY2xvc2VGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLWZvcm0nKTtcbiAgY2xvc2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VMaXN0Rm9ybSk7XG5cbiAgbGlzdEV2ZW50TGlzdGVuZXIoKTtcbiAgdGFza0V2ZW50TGlzdGVuZXIoKTtcbiAgYWRkQ2hlY2tib3hFdmVudExpc3RlbmVyKCk7XG59XG5cbmV4cG9ydCB7IGFkZEV2ZW50TGlzdGVuZXJzIH07XG4iLCJpbXBvcnQgeyBjcmVhdGVMaXN0LCBsaXN0cywgc2F2ZUFuZFJlbmRlciB9IGZyb20gJy4vbGlzdExvZ2ljJztcblxuZnVuY3Rpb24gb3Blbkxpc3RGb3JtKCkge1xuICBsZXQgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0LWZvcm0nKTtcbiAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xufVxuXG5mdW5jdGlvbiBjbG9zZUxpc3RGb3JtKCkge1xuICBsZXQgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0LWZvcm0nKTtcbiAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3QtbmFtZScpO1xuXG4gIGlmIChpbnB1dC52YWx1ZSA9PT0gJycpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgbmV3TGlzdE5hbWUgPSBpbnB1dC52YWx1ZTtcblxuICBjb25zdCBsaXN0ID0gY3JlYXRlTGlzdChuZXdMaXN0TmFtZSk7XG4gIGlucHV0LnZhbHVlID0gJyc7XG4gIGxpc3RzLnB1c2gobGlzdCk7XG4gIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgc2F2ZUFuZFJlbmRlcigpO1xufVxuXG5leHBvcnQgeyBvcGVuTGlzdEZvcm0sIGNsb3NlTGlzdEZvcm0gfTtcbiIsImZ1bmN0aW9uIGdldElucHV0VmFsdWVzKCkge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKS52YWx1ZTtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgY29uc3QgZGVmYXVsdERhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlO1xuICBjb25zdCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlO1xuXG4gIGxldCBkYXkgPSBkZWZhdWx0RGF0ZS5zbGljZSg4LCAxMCk7XG4gIGxldCBtb250aCA9IGRlZmF1bHREYXRlLnNsaWNlKDUsIDcpO1xuICBsZXQgeWVhciA9IGRlZmF1bHREYXRlLnNsaWNlKDAsIDQpO1xuXG4gIGlmIChtb250aC5zdGFydHNXaXRoKCcwJykpIHtcbiAgICBtb250aCA9IG1vbnRoLnN1YnN0cmluZygxKTtcbiAgfVxuICBpZiAoZGF5LnN0YXJ0c1dpdGgoJzAnKSkge1xuICAgIGRheSA9IGRheS5zdWJzdHJpbmcoMSk7XG4gIH1cblxuICBsZXQgZGF0ZSA9IGAke21vbnRofS8ke2RheX0vJHt5ZWFyfWA7XG5cbiAgaWYgKG5hbWUgPT09ICcnIHx8IGRlc2NyaXB0aW9uID09PSAnJyB8fCBkYXRlID09PSAnJyB8fCBwcmlvcml0eSA9PT0gJycpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3ItdGV4dCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiB7IG5hbWUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSB9O1xufVxuXG5mdW5jdGlvbiBjbGVhcklucHV0cygpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKS52YWx1ZSA9ICcnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZScpLnZhbHVlID0gJyc7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlID0gJyc7XG59XG5cbmV4cG9ydCB7IGdldElucHV0VmFsdWVzLCBjbGVhcklucHV0cyB9O1xuIiwiaW1wb3J0IHsgYWRkRXZlbnRMaXN0ZW5lcnMsIHVwZGF0ZUV2ZW50TGlzdGVuZXJzIH0gZnJvbSAnLi9kaXNwbGF5SGFuZGxlcic7XG5pbXBvcnQgeyByZW5kZXIgfSBmcm9tICcuL2xpc3RMb2dpYyc7XG5cbmFkZEV2ZW50TGlzdGVuZXJzKCk7XG5yZW5kZXIoKTtcbiJdLCJuYW1lcyI6WyJsaXN0c0NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRhc2tzQ29udGFpbmVyIiwidGFza1RlbXBsYXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJMT0NBTF9TVE9SQUdFX0xJU1RfS0VZIiwiTE9DQUxfU1RPUkFHRV9TRUxFQ1RFRF9MSVNUX0lEX0tFWSIsImxpc3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNlbGVjdGVkTGlzdElkIiwic2F2ZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzYXZlQW5kUmVuZGVyIiwicmVuZGVyIiwiY2xlYXJFbGVtZW50IiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJsaXN0IiwibGlzdEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsImxpc3RJZCIsImlkIiwibGlzdEVsZW1lbnRIVE1MIiwibmFtZSIsImlubmVySFRNTCIsImxpc3ROYW1lIiwiYXBwZW5kQ2hpbGQiLCJzZWxlY3RlZExpc3QiLCJmaW5kIiwic3R5bGUiLCJkaXNwbGF5IiwidGFza3MiLCJ0YXNrIiwidGFza0VsZW1lbnQiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImNoZWNrYm94IiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJ0YXNrSXRlbSIsImRlbGV0ZUJ1dHRvbiIsImNoZWNrZWQiLCJjb21wbGV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJzZWxlY3RlZExpc3RJbmRleCIsImZpbmRJbmRleCIsImZpbHRlciIsInQiLCJyZW5kZXJUYXNrcyIsImVsZW1lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJmb3JtIiwiaW5wdXQiLCJ2YWx1ZSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInB1c2giLCJlIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImhhc0F0dHJpYnV0ZSIsImlkUGFyZW50IiwiaW5wdXRWYWx1ZXMiLCJkZWZhdWx0RGF0ZSIsImRheSIsInNsaWNlIiwibW9udGgiLCJ5ZWFyIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImdldElucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==
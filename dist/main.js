(()=>{"use strict";const e=document.querySelector("[data-lists]"),t=document.querySelector("[data-tasks]"),n=document.getElementById("task-template"),i="task.lists",d="task.selectedListId";let a=JSON.parse(localStorage.getItem(i))||[],l=localStorage.getItem(d);function s(){localStorage.setItem(i,JSON.stringify(a)),localStorage.setItem(d,l)}function r(){s(),o()}function o(){c(e),a.forEach((t=>{const n=document.createElement("div");n.classList.add("lists"),n.dataset.listId=t.id;let i=`\n        <div class="list-item">\n          <h3 class="list-text hover">${t.name}</h3>\n          <i class="fa-solid fa-minus hover fa-lg" style="color: #f8f7f9" data-delete-list-btn></i>\n        </div>\n        `;n.innerHTML=i;const d=n.querySelector(".list-text");t.id===l&&d.classList.add("current"),e.appendChild(n)}));const i=a.find((e=>e.id===l));t.style.display=null==l?"none":"",c(t),function(e){e.tasks.forEach((e=>{const i=document.importNode(n.content,!0),d=i.querySelector("input"),a=i.querySelector("p.name"),l=i.querySelector("p.description"),s=i.querySelector("p.date"),r=i.querySelector("p.priority"),o=i.querySelector(".task-item");i.querySelector(".delete-task-btn").id="btn"+e.id,o.id=e.id,d.id="chk"+e.id,d.checked=e.complete,a.innerHTML=e.name,l.innerHTML=e.description,s.innerHTML=e.date,r.innerHTML=e.priority,t.appendChild(i)}))}(i)}function c(e){for(;e.firstChild;)e.removeChild(e.firstChild)}document.getElementById("new-list").addEventListener("click",(function(){document.getElementById("list-form").style.display="flex"})),document.getElementById("close-form").addEventListener("click",(function(){let e=document.getElementById("list-form"),t=document.getElementById("list-name");if(""===t.value)return;const n=(i=t.value,{id:Date.now().toString(),name:i,tasks:[]});var i;t.value="",a.push(n),e.style.display="none",r()})),e.addEventListener("click",(e=>{"h3"===e.target.tagName.toLowerCase()&&(l=e.target.parentNode.parentNode.dataset.listId,r())})),e.addEventListener("click",(e=>{if(e.target.hasAttribute("data-delete-list-btn")){e.target.querySelector("i");const t=e.target.parentNode.parentNode.dataset.listId;a=a.filter((e=>e.id!==t)),t===l&&(l=null),r()}})),document.getElementById("add-task").addEventListener("click",(()=>{const e=function(){const e=document.getElementById("name").value,t=document.getElementById("description").value,n=document.getElementById("date").value,i=document.getElementById("priority").value;let d=n.slice(8,10),a=n.slice(5,7),l=n.slice(0,4);a.startsWith("0")&&(a=a.substring(1)),d.startsWith("0")&&(d=d.substring(1));let s=`${a}/${d}/${l}`;if(""!==e&&""!==t&&""!==s&&""!==i)return{name:e,description:t,date:s,priority:i};document.getElementById("error-text").style.display="block"}(),t=(n=e.name,i=e.description,d=e.date,s=e.priority,{id:Date.now().toString(),name:n,description:i,date:d,priority:s,complete:!1});var n,i,d,s;a.find((e=>e.id===l)).tasks.push(t),document.getElementById("name").value="",document.getElementById("description").value="",document.getElementById("date").value="",document.getElementById("priority").value="",r()})),t.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(a.find((e=>e.id===l)).tasks.find((t=>"chk"+t.id===e.target.id)).complete=e.target.checked,s())})),o()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJOEIsS0FBS0MsTUFBTUMsV0FDZjlCLEtBQU1BLEVBQ05jLFlBQWFBLEVBQ2JDLEtBQU1BLEVBQ05DLFNBQVVBLEVBQ1ZHLFVBQVUsSUFQZCxJQUFvQm5CLEVBQU1jLEVBQWFDLEVBQU1DLEVBZ0dwQnRDLEVBQU0yQixNQUFNZCxHQUFTQSxFQUFLTyxLQUFPZixJQUN6Q3lCLE1BQU11QixLQUFLdEIsR0c1RzFCdEMsU0FBU0ksZUFBZSxRQUFRb0QsTUFBUSxHQUN4Q3hELFNBQVNJLGVBQWUsZUFBZW9ELE1BQVEsR0FDL0N4RCxTQUFTSSxlQUFlLFFBQVFvRCxNQUFRLEdBQ3hDeEQsU0FBU0ksZUFBZSxZQUFZb0QsTUFBUSxHSDJHMUN4QyxHQUFlLElBS2pCZCxFQUFlbUQsaUJBQWlCLFNBQVVRLElBQ0QsVUFBbkNBLEVBQUVDLE9BQU9DLFFBQVFDLGdCQUNFekQsRUFBTTJCLE1BQU1kLEdBQVNBLEVBQUtPLEtBQU9mLElBQ3BCeUIsTUFBTUgsTUFDckNJLEdBQVMsTUFBUUEsRUFBS1gsS0FBT2tDLEVBQUVDLE9BQU9uQyxLQUU1QnFCLFNBQVdhLEVBQUVDLE9BQU9mLFFBQ2pDbEMsSUFDRixJSW5KSkksRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9saXN0TG9naWMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2Rpc3BsYXlIYW5kbGVyLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9mb3Jtcy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza0xvZ2ljLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjbGVhcklucHV0cywgZ2V0SW5wdXRWYWx1ZXMgfSBmcm9tICcuL3Rhc2tMb2dpYyc7XG5cbmNvbnN0IGxpc3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtbGlzdHNdJyk7XG5jb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRhc2tzXScpO1xuY29uc3QgdGFza1RlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rhc2stdGVtcGxhdGUnKTtcblxuY29uc3QgTE9DQUxfU1RPUkFHRV9MSVNUX0tFWSA9ICd0YXNrLmxpc3RzJztcbmNvbnN0IExPQ0FMX1NUT1JBR0VfU0VMRUNURURfTElTVF9JRF9LRVkgPSAndGFzay5zZWxlY3RlZExpc3RJZCc7XG5sZXQgbGlzdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfTElTVF9LRVkpKSB8fCBbXTtcbmxldCBzZWxlY3RlZExpc3RJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfU0VMRUNURURfTElTVF9JRF9LRVkpO1xuXG5mdW5jdGlvbiBsaXN0RXZlbnRMaXN0ZW5lcigpIHtcbiAgbGlzdHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdoMycpIHtcbiAgICAgIHNlbGVjdGVkTGlzdElkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmRhdGFzZXQubGlzdElkO1xuICAgICAgc2F2ZUFuZFJlbmRlcigpO1xuICAgIH1cbiAgfSk7XG4gIGxpc3RzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWRlbGV0ZS1saXN0LWJ0bicpKSB7XG4gICAgICBjb25zdCBkZWxldGVCdXR0b24gPSBlLnRhcmdldC5xdWVyeVNlbGVjdG9yKCdpJyk7XG4gICAgICBjb25zdCBpZFBhcmVudCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5kYXRhc2V0Lmxpc3RJZDtcbiAgICAgIGxpc3RzID0gbGlzdHMuZmlsdGVyKChsaXN0KSA9PiBsaXN0LmlkICE9PSBpZFBhcmVudCk7XG4gICAgICBpZiAoaWRQYXJlbnQgPT09IHNlbGVjdGVkTGlzdElkKSB7XG4gICAgICAgIHNlbGVjdGVkTGlzdElkID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHNhdmVBbmRSZW5kZXIoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaXN0KG5hbWUpIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgIG5hbWU6IG5hbWUsXG4gICAgdGFza3M6IFtdLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrKG5hbWUsIGRlc2NyaXB0aW9uLCBkYXRlLCBwcmlvcml0eSkge1xuICByZXR1cm4ge1xuICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgbmFtZTogbmFtZSxcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgZGF0ZTogZGF0ZSxcbiAgICBwcmlvcml0eTogcHJpb3JpdHksXG4gICAgY29tcGxldGU6IGZhbHNlLFxuICB9O1xufVxuXG5mdW5jdGlvbiBzYXZlKCkge1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX0xJU1RfS0VZLCBKU09OLnN0cmluZ2lmeShsaXN0cykpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShMT0NBTF9TVE9SQUdFX1NFTEVDVEVEX0xJU1RfSURfS0VZLCBzZWxlY3RlZExpc3RJZCk7XG59XG5cbmZ1bmN0aW9uIHNhdmVBbmRSZW5kZXIoKSB7XG4gIHNhdmUoKTtcbiAgcmVuZGVyKCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgY2xlYXJFbGVtZW50KGxpc3RzQ29udGFpbmVyKTtcbiAgcmVuZGVyTGlzdHMoKTtcblxuICBjb25zdCBzZWxlY3RlZExpc3QgPSBsaXN0cy5maW5kKChsaXN0KSA9PiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZCk7XG4gIGlmIChzZWxlY3RlZExpc3RJZCA9PSBudWxsKSB7XG4gICAgdGFza3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfSBlbHNlIHtcbiAgICB0YXNrc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gIH1cbiAgY2xlYXJFbGVtZW50KHRhc2tzQ29udGFpbmVyKTtcbiAgcmVuZGVyVGFza3Moc2VsZWN0ZWRMaXN0KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVGFza3Moc2VsZWN0ZWRMaXN0KSB7XG4gIHNlbGVjdGVkTGlzdC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgY29uc3QgdGFza0VsZW1lbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRhc2tUZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICBjb25zdCBjaGVja2JveCA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgY29uc3QgbmFtZSA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AubmFtZScpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcigncC5kZXNjcmlwdGlvbicpO1xuICAgIGNvbnN0IGRhdGUgPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwLmRhdGUnKTtcbiAgICBjb25zdCBwcmlvcml0eSA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3AucHJpb3JpdHknKTtcbiAgICBjb25zdCB0YXNrSXRlbSA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YXNrLWl0ZW0nKTtcbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlLXRhc2stYnRuJyk7XG5cbiAgICBkZWxldGVCdXR0b24uaWQgPSAnYnRuJyArIHRhc2suaWQ7XG4gICAgdGFza0l0ZW0uaWQgPSB0YXNrLmlkO1xuICAgIGNoZWNrYm94LmlkID0gJ2NoaycgKyB0YXNrLmlkO1xuICAgIGNoZWNrYm94LmNoZWNrZWQgPSB0YXNrLmNvbXBsZXRlO1xuICAgIG5hbWUuaW5uZXJIVE1MID0gdGFzay5uYW1lO1xuICAgIGRlc2NyaXB0aW9uLmlubmVySFRNTCA9IHRhc2suZGVzY3JpcHRpb247XG4gICAgZGF0ZS5pbm5lckhUTUwgPSB0YXNrLmRhdGU7XG4gICAgcHJpb3JpdHkuaW5uZXJIVE1MID0gdGFzay5wcmlvcml0eTtcbiAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRWxlbWVudCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJMaXN0cygpIHtcbiAgbGlzdHMuZm9yRWFjaCgobGlzdCkgPT4ge1xuICAgIGNvbnN0IGxpc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGlzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGlzdHMnKTtcbiAgICBsaXN0RWxlbWVudC5kYXRhc2V0Lmxpc3RJZCA9IGxpc3QuaWQ7XG4gICAgbGV0IGxpc3RFbGVtZW50SFRNTCA9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImxpc3QtaXRlbVwiPlxuICAgICAgICAgIDxoMyBjbGFzcz1cImxpc3QtdGV4dCBob3ZlclwiPiR7bGlzdC5uYW1lfTwvaDM+XG4gICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1taW51cyBob3ZlciBmYS1sZ1wiIHN0eWxlPVwiY29sb3I6ICNmOGY3ZjlcIiBkYXRhLWRlbGV0ZS1saXN0LWJ0bj48L2k+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuXG4gICAgbGlzdEVsZW1lbnQuaW5uZXJIVE1MID0gbGlzdEVsZW1lbnRIVE1MO1xuICAgIGNvbnN0IGxpc3ROYW1lID0gbGlzdEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmxpc3QtdGV4dCcpO1xuICAgIGlmIChsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZCkge1xuICAgICAgbGlzdE5hbWUuY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xuICAgIH1cblxuICAgIGxpc3RzQ29udGFpbmVyLmFwcGVuZENoaWxkKGxpc3RFbGVtZW50KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRWxlbWVudChlbGVtZW50KSB7XG4gIHdoaWxlIChlbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGFza0V2ZW50TGlzdGVuZXIoKSB7XG4gIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtdGFzaycpO1xuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBnZXRJbnB1dFZhbHVlcygpO1xuICAgIGNvbnN0IHRhc2sgPSBjcmVhdGVUYXNrKFxuICAgICAgaW5wdXRWYWx1ZXMubmFtZSxcbiAgICAgIGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uLFxuICAgICAgaW5wdXRWYWx1ZXMuZGF0ZSxcbiAgICAgIGlucHV0VmFsdWVzLnByaW9yaXR5XG4gICAgKTtcbiAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBsaXN0cy5maW5kKChsaXN0KSA9PiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZCk7XG4gICAgc2VsZWN0ZWRMaXN0LnRhc2tzLnB1c2godGFzayk7XG4gICAgY2xlYXJJbnB1dHMoKTtcbiAgICBzYXZlQW5kUmVuZGVyKCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRDaGVja2JveEV2ZW50TGlzdGVuZXIoKSB7XG4gIHRhc2tzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZExpc3QgPSBsaXN0cy5maW5kKChsaXN0KSA9PiBsaXN0LmlkID09PSBzZWxlY3RlZExpc3RJZCk7XG4gICAgICBjb25zdCBzZWxlY3RlZFRhc2sgPSBzZWxlY3RlZExpc3QudGFza3MuZmluZChcbiAgICAgICAgKHRhc2spID0+ICdjaGsnICsgdGFzay5pZCA9PT0gZS50YXJnZXQuaWRcbiAgICAgICk7XG4gICAgICBzZWxlY3RlZFRhc2suY29tcGxldGUgPSBlLnRhcmdldC5jaGVja2VkO1xuICAgICAgc2F2ZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCB7XG4gIHJlbmRlckxpc3RzLFxuICBjcmVhdGVMaXN0LFxuICBjcmVhdGVUYXNrLFxuICBsaXN0cyxcbiAgdGFza0V2ZW50TGlzdGVuZXIsXG4gIHNhdmVBbmRSZW5kZXIsXG4gIGxpc3RFdmVudExpc3RlbmVyLFxuICByZW5kZXIsXG4gIGFkZENoZWNrYm94RXZlbnRMaXN0ZW5lcixcbn07XG4iLCJpbXBvcnQgeyBjbG9zZUxpc3RGb3JtLCBvcGVuTGlzdEZvcm0gfSBmcm9tICcuL2Zvcm1zJztcbmltcG9ydCB7XG4gIGFkZENoZWNrYm94RXZlbnRMaXN0ZW5lcixcbiAgbGlzdEV2ZW50TGlzdGVuZXIsXG4gIHRhc2tFdmVudExpc3RlbmVyLFxufSBmcm9tICcuL2xpc3RMb2dpYyc7XG5cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1saXN0Jyk7XG4gIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTGlzdEZvcm0pO1xuXG4gIGNvbnN0IGNsb3NlRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1mb3JtJyk7XG4gIGNsb3NlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTGlzdEZvcm0pO1xuXG4gIGxpc3RFdmVudExpc3RlbmVyKCk7XG4gIHRhc2tFdmVudExpc3RlbmVyKCk7XG4gIGFkZENoZWNrYm94RXZlbnRMaXN0ZW5lcigpO1xufVxuXG5leHBvcnQgeyBhZGRFdmVudExpc3RlbmVycyB9O1xuIiwiaW1wb3J0IHsgY3JlYXRlTGlzdCwgbGlzdHMsIHNhdmVBbmRSZW5kZXIgfSBmcm9tICcuL2xpc3RMb2dpYyc7XG5cbmZ1bmN0aW9uIG9wZW5MaXN0Rm9ybSgpIHtcbiAgbGV0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdC1mb3JtJyk7XG4gIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcbn1cblxuZnVuY3Rpb24gY2xvc2VMaXN0Rm9ybSgpIHtcbiAgbGV0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdC1mb3JtJyk7XG4gIGxldCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0LW5hbWUnKTtcblxuICBpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IG5ld0xpc3ROYW1lID0gaW5wdXQudmFsdWU7XG5cbiAgY29uc3QgbGlzdCA9IGNyZWF0ZUxpc3QobmV3TGlzdE5hbWUpO1xuICBpbnB1dC52YWx1ZSA9ICcnO1xuICBsaXN0cy5wdXNoKGxpc3QpO1xuICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHNhdmVBbmRSZW5kZXIoKTtcbn1cblxuZXhwb3J0IHsgb3Blbkxpc3RGb3JtLCBjbG9zZUxpc3RGb3JtIH07XG4iLCJmdW5jdGlvbiBnZXRJbnB1dFZhbHVlcygpIHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWU7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWU7XG4gIGNvbnN0IGRlZmF1bHREYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZTtcbiAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZTtcblxuICBsZXQgZGF5ID0gZGVmYXVsdERhdGUuc2xpY2UoOCwgMTApO1xuICBsZXQgbW9udGggPSBkZWZhdWx0RGF0ZS5zbGljZSg1LCA3KTtcbiAgbGV0IHllYXIgPSBkZWZhdWx0RGF0ZS5zbGljZSgwLCA0KTtcblxuICBpZiAobW9udGguc3RhcnRzV2l0aCgnMCcpKSB7XG4gICAgbW9udGggPSBtb250aC5zdWJzdHJpbmcoMSk7XG4gIH1cbiAgaWYgKGRheS5zdGFydHNXaXRoKCcwJykpIHtcbiAgICBkYXkgPSBkYXkuc3Vic3RyaW5nKDEpO1xuICB9XG5cbiAgbGV0IGRhdGUgPSBgJHttb250aH0vJHtkYXl9LyR7eWVhcn1gO1xuXG4gIGlmIChuYW1lID09PSAnJyB8fCBkZXNjcmlwdGlvbiA9PT0gJycgfHwgZGF0ZSA9PT0gJycgfHwgcHJpb3JpdHkgPT09ICcnKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vycm9yLXRleHQnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4geyBuYW1lLCBkZXNjcmlwdGlvbiwgZGF0ZSwgcHJpb3JpdHkgfTtcbn1cblxuZnVuY3Rpb24gY2xlYXJJbnB1dHMoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJykudmFsdWUgPSAnJztcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWUgPSAnJztcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGUnKS52YWx1ZSA9ICcnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKS52YWx1ZSA9ICcnO1xufVxuXG5leHBvcnQgeyBnZXRJbnB1dFZhbHVlcywgY2xlYXJJbnB1dHMgfTtcbiIsImltcG9ydCB7IGFkZEV2ZW50TGlzdGVuZXJzLCB1cGRhdGVFdmVudExpc3RlbmVycyB9IGZyb20gJy4vZGlzcGxheUhhbmRsZXInO1xuaW1wb3J0IHsgcmVuZGVyIH0gZnJvbSAnLi9saXN0TG9naWMnO1xuXG5hZGRFdmVudExpc3RlbmVycygpO1xucmVuZGVyKCk7XG4iXSwibmFtZXMiOlsibGlzdHNDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrc0NvbnRhaW5lciIsInRhc2tUZW1wbGF0ZSIsImdldEVsZW1lbnRCeUlkIiwiTE9DQUxfU1RPUkFHRV9MSVNUX0tFWSIsIkxPQ0FMX1NUT1JBR0VfU0VMRUNURURfTElTVF9JRF9LRVkiLCJsaXN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZWxlY3RlZExpc3RJZCIsInNhdmUiLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2F2ZUFuZFJlbmRlciIsInJlbmRlciIsImNsZWFyRWxlbWVudCIsImZvckVhY2giLCJsaXN0IiwibGlzdEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YXNldCIsImxpc3RJZCIsImlkIiwibGlzdEVsZW1lbnRIVE1MIiwibmFtZSIsImlubmVySFRNTCIsImxpc3ROYW1lIiwiYXBwZW5kQ2hpbGQiLCJzZWxlY3RlZExpc3QiLCJmaW5kIiwic3R5bGUiLCJkaXNwbGF5IiwidGFza3MiLCJ0YXNrIiwidGFza0VsZW1lbnQiLCJpbXBvcnROb2RlIiwiY29udGVudCIsImNoZWNrYm94IiwiZGVzY3JpcHRpb24iLCJkYXRlIiwicHJpb3JpdHkiLCJ0YXNrSXRlbSIsImNoZWNrZWQiLCJjb21wbGV0ZSIsInJlbmRlclRhc2tzIiwiZWxlbWVudCIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb3JtIiwiaW5wdXQiLCJ2YWx1ZSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInB1c2giLCJlIiwidGFyZ2V0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImhhc0F0dHJpYnV0ZSIsImlkUGFyZW50IiwiZmlsdGVyIiwiaW5wdXRWYWx1ZXMiLCJkZWZhdWx0RGF0ZSIsImRheSIsInNsaWNlIiwibW9udGgiLCJ5ZWFyIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImdldElucHV0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==